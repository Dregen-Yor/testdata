<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>xxx - Contests</title>
    <link rel="stylesheet" href="style.css?v=4" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-4vvVuv5AO9M/dwZ0pniS3pSke1Mt2rt7NmBGG99nmCaTKty+O+kO5OVwOB1p5DY+" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@13.0.1/dist/markdown-it.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/common.min.js"></script>
    <script>
      window.MathJax = {
        tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']] },
        svg: { fontCache: 'global' }
      };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body data-mode="contests">
    <header class="container">
      <h1>SDU-ENG - Contests</h1>
      <nav class="nav">
        <a href="/index.html">All Problems</a> |
        <a href="/unsolved.html">Unsolved</a> |
        <a href="/solved.html">Solved</a> |
        <a href="/contests.html"><b>Contests</b></a>
      </nav>
            <p class="muted">Each contest tracks up to 15 problems (A..). Record pass/attempt counts and mark our status: AC=green, attempted=red, unsubmitted=default.</p>
    </header>

    <section class="container card">
      <h2>Git 同步</h2>
      <div class="git-row">
        <input id="commit-msg" type="text" placeholder="提交说明" />
        <button type="button" id="git-pull-btn" class="secondary">获取远程更新</button>
        <button type="button" id="git-push-btn">上传到 GitHub</button>
        <span class="muted">（需先在项目根目录完成 <code>git init</code> 和远程配置）</span>
      </div>
      <pre id="git-log" class="git-log" style="display:none;"></pre>
    </section>

    <section class="container card">
      <h2>新增 / 编辑 比赛</h2>
      <form id="contest-form">
        <input type="hidden" id="cid" />
        <div class="grid">
          <label>名称
            <input id="name" type="text" placeholder="如：2025 ICPC xxx Regional" required />
          </label>
          <label>题目数量 (≤15)
            <input id="total_problems" type="number" min="1" max="15" value="12" required />
          </label>
          <label>排名 (a/b)
            <input id="rank_str" type="text" placeholder="106/109" />
          </label>
        </div>
        <label>赛后总结
          <textarea id="summary" rows="3" placeholder="记录整体策略、失误、补题计划等"></textarea>
        </label>

        <div id="grid" class="contest-grid"></div>

        <div class="actions">
          <button type="submit" id="c-submit-btn">保存</button>
          <button type="button" id="c-reset-btn" class="secondary">重置表单</button>
        </div>
      </form>
    </section>

    <section class="container card">
      <h2>比赛列表</h2>
      <div class="table-wrap">
        <table id="ctable">
          <thead>
            <tr>
              <th>Name</th>
              <th>Problems</th>
              <th>Solved</th>
              <th>Rank</th>
              <th>Updated</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="ctbody"></tbody>
        </table>
      </div>
    </section>

    <footer class="container muted">
            <p>Contest data is stored in <code>data/contests.json</code>; problem data stays in <code>data/problems.json</code>.</p>
    </footer>

    <div id="contest-modal" class="modal" hidden>
      <div class="modal-content contest-modal">
        <button type="button" id="contest-modal-close" class="modal-close" aria-label="关闭">×</button>
        <h3 id="contest-modal-title"></h3>
        <p class="muted" id="contest-modal-meta"></p>
        <div id="contest-modal-summary" class="markdown-body"></div>
        <div id="contest-modal-grid" class="contest-grid detail-grid"></div>
      </div>
    </div>

    <script src="contests.js?v=3"></script>
  </body>
</html>
